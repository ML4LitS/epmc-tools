.. _cli_usage:

=======================
Command-Line Interface
=======================

The `epmc-cli` tool provides a command-line interface for the Europe PMC API and for local file processing.

Usage
-----

.. code-block:: bash

    epmc-cli [OPTIONS] COMMAND [ARGS]...

Options
-------

*   `--email TEXT`: Contact email for API identification.
*   `--tool TEXT`: Tool name for API identification.

Commands
--------

*   `local`: Commands for local file processing.
*   `articles`: Commands for the Europe PMC Articles API.
*   `annotations`: Commands for the Europe PMC Annotations API.
*   `grants`: Commands for the Europe PMC Grants API.
*   `oai`: Commands for the Europe PMC OAI-PMH service.

Local Commands
--------------

The `local` command group provides tools for processing local files.

`jats2json`
~~~~~~~~~~~

Converts a JATS XML file from a local path or URL to a structured JSON format. By default, it also performs sentence splitting.

.. code-block:: bash

    epmc-cli local jats2json <path_to_xml_file_or_url> <path_to_output_json> [--no-sentenciser]

**Arguments:**

*   `INPUT_PATH`: Path or URL to the local XML file to process.
*   `OUTPUT_PATH`: Path to save the output JSON file.

**Options:**

*   `--no-sentenciser`: Disable sentence splitting.

**Examples:**

.. code-block:: bash

    epmc-cli local jats2json test_data/PXD053361.xml output.json
    epmc-cli local jats2json https://www.ebi.ac.uk/europepmc/webservices/rest/PMC11704132/fullTextXML output.json --no-sentenciser

`extract-accessions`
~~~~~~~~~~~~~~~~~~~~

Extracts accession numbers from a JSON file (previously generated by `jats2json`).

**Arguments:**

*   `INPUT_PATH`: Path to the local JSON file to process.
*   `OUTPUT_PATH`: Path to save the output JSON file.

**Example:**

.. code-block:: bash

    epmc-cli local extract-accessions output.json accessions.json

Articles API
------------

**Search for articles:**

.. code-block:: bash

    epmc-cli articles search "machine learning" --page-size 1

**Get article metadata:**

.. code-block:: bash

    epmc-cli articles get PMC11704132

**Get full-text XML:**

.. code-block:: bash

    epmc-cli articles fulltext PMC11704132

Annotations API
---------------

**Get annotations by article ID:**

.. code-block:: bash

    epmc-cli annotations by-id PMC:11704132

**Find articles that cite a specific entity:**

.. code-block:: bash

    epmc-cli annotations by-entity p53

**Get annotations of a specific type:**

*   **By data accession:**

    .. code-block:: bash

        epmc-cli annotations by-type --type 'Accession Numbers' --subtype 'uniprot'

*   **By gene name:**

    .. code-block:: bash

        epmc-cli annotations by-type --type 'Gene_Proteins'

*   **By resource name:**

    .. code-block:: bash

        epmc-cli annotations by-type --type 'Resources'

Grants API
----------

**Search for grants:**

.. code-block:: bash

    epmc-cli grants search "cancer" --page-size 1

OAI Service
-----------

**Harvest metadata:**

.. code-block:: bash

    epmc-cli oai harvest --metadata-prefix oai_dc
